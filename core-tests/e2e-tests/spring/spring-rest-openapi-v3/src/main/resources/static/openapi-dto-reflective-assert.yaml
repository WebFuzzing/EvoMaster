openapi: 3.0.3
info:
  title: Schema for E2E DTO Testing
  version: 1.0.0

paths:
  /items-inline:
    post:
      summary: Accepts an array of objects, each with numbers and labels
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                required: [numbers, labels]
                properties:
                  numbers:
                    type: array
                    items:
                      type: integer
                  labels:
                    type: array
                    items:
                      type: object
                      required: [value]
                      properties:
                        value:
                          type: string
      responses:
        '200':
          description: OK
  /items-components:
    post:
      summary: Accepts an array of objects with numbers, labels, and wrappedStrings wrapper
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/ParentSchema'
      responses:
        '200':
          description: OK
  /primitiveTypes:
    post:
      summary: Example with all primitive and format types (no array/object)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                aString:
                  type: string
                aRegex:
                  type: string
                  pattern: "^[a-zA-Z0-9]+$"
                aDate:
                  type: string
                  format: date
                aTime:
                  type: string
                  format: time
                aDateTime:
                  type: string
                  format: date-time
                anInteger:
                  type: integer
                aLong:
                  type: integer
                  format: int64
                aDouble:
                  type: number
                aFloat:
                  type: number
                  format: float
                aBoolean:
                  type: boolean
                aNullableString:
                  type: string
                  nullable: true
              required:
                - aString
                - aRegex
                - aBase64String
                - aDate
                - aTime
                - aDateTime
                - anInteger
                - aLong
                - aDouble
                - aFloat
                - aBoolean
      responses:
        '200':
          description: OK
  /parent:
    post:
      summary: Uses ParentSchema, which references ChildSchema
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ParentSchema'
      responses:
        '200':
          description: OK
  /allof:
    post:
      summary: Combines two components NamePart and AgePart
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/NamePart'
                - $ref: '#/components/schemas/AgePart'
      responses:
        '200':
          description: OK
  /anyof:
    post:
      summary: Accepts either an email (component) or phone (inline)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              anyOf:
                - $ref: '#/components/schemas/EmailPayload'
                - type: object
                  required: [phone]
                  properties:
                    phone:
                      type: string
      responses:
        '200':
          description: OK
  /oneof:
    post:
      summary: Accepts either cat or mouse object (but not both)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - type: object
                  required: [cat]
                  properties:
                    cat:
                      type: string
                - type: object
                  required: [mouse]
                  properties:
                    mouse:
                      type: string
      responses:
        '200':
          description: OK
  /enum-type:
    post:
      summary: Create an item using enums
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnumType'
      responses:
        '200':
          description: OK
  /enum-examples:
    post:
      summary: Submit an object using examples
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnumExample'
      responses:
        '200':
          description: OK
  /additional-properties-inline:
    post:
      summary: Update inline additionalProperties
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                stringProp:
                  type: string
              additionalProperties:
                type: object
                required:
                  - value
                properties:
                  value:
                    type: string
                  source:
                    type: string
              required:
                - stringProp
      responses:
        '200':
          description: OK
  /additional-properties-ref:
    post:
      summary: Update ref additionalProperties
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                stringProp:
                  type: string
              additionalProperties:
                $ref: '#/components/schemas/ChildSchema'
              required:
                - stringProp
      responses:
        '204':
          description: Attributes updated
#  /additional-properties-no-root:
#    post:
#      summary: Update ref additionalProperties
#      requestBody:
#        required: true
#        content:
#          application/json:
#            schema:
#              type: object
#              additionalProperties:
#                type: object
#                required:
#                  - value
#                properties:
#                  value:
#                    type: string
#                  source:
#                    type: string
#      responses:
#        '204':
#          description: Attributes updated

components:
  schemas:
    NamePart:
      type: object
      required: [name]
      properties:
        name:
          type: string

    AgePart:
      type: object
      required: [age]
      properties:
        age:
          type: integer

    EmailPayload:
      type: object
      required: [email]
      properties:
        email:
          type: string

    ParentSchema:
      type: object
      properties:
        label:
          type: string
        child:
          $ref: '#/components/schemas/ChildSchema'
      required:
        - label
        - child

    ChildSchema:
      type: object
      properties:
        name:
          type: string
        age:
          type: integer
      required:
        - name
        - age

    EnumType:
      type: object
      properties:
        name:
          type: string
        status:
          type: string
          enum: [ active, inactive, archived ]
        intStatus:
          type: integer
          enum: [ -1, 0, 1 ]
      required:
        - name
        - status
        - intStatus

    EnumExample:
      type: object
      properties:
        textValue:
          type: string
          example: "hello world"
        flagValue:
          type: boolean
          example: true
        countValue:
          type: integer
          example: 33
        scoreValue:
          type: number
          format: float
          example: 3.14
        listValue:
          type: array
          items:
            type: string
          example: [ "s1", "s2", "s3" ]
      required:
        - textValue
        - flagValue
        - countValue
        - scoreValue
        - listValue
